let PRTFL={cfg:{previewContainerId:"PRTFL",detailsContainerId:"",globalClassName:"prtfl",imageRepository:"./img",layout:"default",items:[]},init:function(){PRTFL.Network.JSONRequest("./PRTFL.json",function(e){e?(PRTFL.cfg.items=e.items,PRTFL.View.renderPreviewItems(PRTFL.cfg.items)):console.log("NO DATA")})},Network:{JSONRequest:function(e,t){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="json",i.send(),i.onload=function(){t(i.response)}}},View:{getPreviewItemsRoot:function(){if(PRTFL.cfg.previewContainerId.length>0){let e=document.getElementById(PRTFL.cfg.previewContainerId);return PRTFL.View.addItemClassName(e,"preview_root"),e}return document.getElementsByTagName("body")[0]},renderPreviewItems:function(e){let t=PRTFL.View.getPreviewItemsRoot(),i=document.createElement("div");PRTFL.View.addItemClassName(i,"preview_container");for(let t=0;t<e.length;t++){let n=e[t],a=PRTFL.View.PreviewItem(n);n.id=PRTFL.cfg.globalClassName+"_item_"+t,a.id=PRTFL.cfg.globalClassName+"_item_"+t,i.appendChild(a)}t.appendChild(i)},renderDetailsItem:function(e){let t=PRTFL.View.getDetailsItemRoot();t.appendChild(PRTFL.View.DetailsOverlayItem()),t.appendChild(PRTFL.View.DetailsItem(e))},destroyDetailsItem:function(e){let t=PRTFL.View.getDetailsItemRoot(),i=t.getElementsByClassName(PRTFL.cfg.globalClassName+"_details_overlay");for(;i.length>0;)i[0].parentNode.removeChild(i[0]);for(i=t.getElementsByClassName(PRTFL.cfg.globalClassName+"_details_item");i.length>0;)i[0].parentNode.removeChild(i[0])},PreviewItem:function(e){let t=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div");if(PRTFL.View.addItemClassName(t,"preview_item"),PRTFL.View.addItemClassName(i,"preview_thumbnail"),PRTFL.View.addItemClassName(n,"preview_thumbnail_overlay"),PRTFL.View.addItemClassName(a,"preview_text_wrapper"),t.appendChild(i),t.appendChild(n),t.appendChild(a),e.preview.title.length>0){let t=document.createElement("div");t.innerHTML="<h2>"+e.preview.title+"</h2>",PRTFL.View.addItemClassName(t,"preview_title"),a.appendChild(t)}if(e.preview.description.length>0){let t=document.createElement("div");t.textContent=e.preview.description,PRTFL.View.addItemClassName(t,"preview_description"),a.appendChild(t)}return e.preview.thumbnail.length>0&&(i.style.backgroundImage="url('"+PRTFL.cfg.imageRepository+"/"+e.preview.thumbnail+"')"),t.onclick=function(){PRTFL.View.renderDetailsItem(e)},t},getDetailsItemRoot:function(){if(PRTFL.cfg.detailsContainerId.length>0){let e=document.getElementById(PRTFL.cfg.detailsContainerId);return PRTFL.View.addItemClassName(e,"details_root"),e}return document.getElementsByTagName("body")[0]},DetailsOverlayItem:function(){let e=document.createElement("div");return PRTFL.View.addItemClassName(e,"details_overlay"),e.onclick=function(){PRTFL.View.destroyDetailsItem()},e},DetailsItem:function(e){let t=document.createElement("div");PRTFL.View.addItemClassName(t,"details_item");let i=document.createElement("div");if(i.innerHTML='<i class="material-icons">close</i>',PRTFL.View.addItemClassName(i,"details_navigation_close"),i.onclick=function(){PRTFL.View.destroyDetailsItem()},t.appendChild(i),e.details.title.length>0){let i=document.createElement("div");i.innerHTML="<h1>"+e.details.title+"</h1>",PRTFL.View.addItemClassName(i,"details_title"),t.appendChild(i)}return e.details.content.length>0&&e.details.content.forEach(function(e){let i=document.createElement("div");PRTFL.View.addItemClassName(i,"details_content"),i.appendChild(PRTFL.View.ContentItemView(e)),t.appendChild(i)}),t},ContentItemView:function(e){let t=document.createElement("div"),i=e.type;switch(i){case"TEXT":t.textContent=e.value;break;case"HTML":t.innerHTML=e.value;break;case"PICTURE":t=PRTFL.View.PictureContentItemView(e);break;case"YOUTUBE":t=PRTFL.View.YoutubeContentItemView(e)}return PRTFL.View.addItemClassName(t,"details_content_item"),PRTFL.View.addItemClassName(t,"details_content_item_"+i),t},YoutubeContentItemView:function(e){let t=document.createElement("div");return t.innerHTML='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+e.value+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',t},PictureContentItemView:function(e){let t=document.createElement("div"),i=e.value;if(1==i.length)t.appendChild(PRTFL.View.PictureElement(i[0]));else if(i.length>1){for(let e=0,n=i.length;e<n;e++){let n=PRTFL.View.PictureElement(i[e]);n.id="details_content_item_PICTURE_"+e,PRTFL.View.addItemClassName(n,"details_content_item_PICTURE_picture"),0!=e&&(n.style.display="none"),t.appendChild(n)}let e=0,a=document.createElement("div"),l=document.createElement("div"),d=document.createElement("div"),m=document.createElement("div");function n(t){let n=document.getElementsByClassName(PRTFL.cfg.globalClassName+"_details_content_item_PICTURE_picture");for(let e=0,t=n.length;e<t;e++)n[e].style.display="none";document.getElementById(t).style.display="",m.textContent=e+1+" / "+i.length}l.innerHTML='<i class="material-icons">arrow_back</i>',d.innerHTML='<i class="material-icons">arrow_forward</i>',m.textContent="1 / "+i.length,PRTFL.View.addItemClassName(a,"details_content_item_PICTURE_navigate_wrapper"),PRTFL.View.addItemClassName(a,"details_content"),PRTFL.View.addItemClassName(l,"details_content_item_PICTURE_navigate_back"),PRTFL.View.addItemClassName(d,"details_content_item_PICTURE_navigate_forward"),PRTFL.View.addItemClassName(m,"details_content_item_PICTURE_navigate_counter"),l.onclick=function(){e>0&&n("details_content_item_PICTURE_"+--e)},d.onclick=function(){e<i.length-1&&n("details_content_item_PICTURE_"+ ++e)},a.appendChild(l),a.appendChild(m),a.appendChild(d),t.appendChild(a)}return t},PictureElement(e){let t=document.createElement("img");return t.setAttribute("src",PRTFL.cfg.imageRepository+"/"+e),PRTFL.View.addItemClassName(t,"picture"),t},addItemClassName(e,t){e.classList.add(PRTFL.cfg.globalClassName),e.classList.add(PRTFL.cfg.globalClassName+"_"+t)}}};PRTFL.init();
